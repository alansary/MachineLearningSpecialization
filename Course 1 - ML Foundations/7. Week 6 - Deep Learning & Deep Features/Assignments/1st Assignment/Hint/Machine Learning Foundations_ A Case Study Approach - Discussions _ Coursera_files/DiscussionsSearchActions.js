define("bundles/discussions/actions/DiscussionsSearchActions",["require","exports","module","bundles/discussions/constants","bundles/discussions/api/SearchApi"],function(require,exports,module){"use strict";var n=require("bundles/discussions/constants"),e=n.FluxibleActions,u=n.loadingStates,r=require("bundles/discussions/api/SearchApi"),i=function receiveSearchResults(n,u,r,t,i){n.dispatch(e.SEARCH_RESULTS_RECEIVED,{pageNum:t,forumId:u,query:r,naptimeResponse:i})},t=function searchApiError(n,u){n.dispatch(e.SEARCH_API_ERROR,{err:u})};exports.search=function(s,n,m){var o=n.query,l=n.filterQueryString,c=n.forumId,E=n.contextId,p=n.forumType,d=n.reset,S=void 0===d?!1:d,a=n.pageNum,f=void 0===a?1:a,A=n.includeDeleted;s.dispatch(e.UPDATE_LOADING_STATE,u.LOADING),S&&s.dispatch(e.CLEAR_DISCUSSIONS_SEARCH_STORE),r.searchFor({query:o,filterQueryString:l,forumType:p,forumId:c,contextId:E,pageNum:f,includeDeleted:A}).then(function(e){return i(s,c,o,f,e)}).fail(function(e){return t(s,e)}).done(function(){return m()})},exports.goToPage=function(i,n,a){var c=n.query,d=n.filterQueryString,s=n.pageNum,A=n.forum,o=n.forumId,p=n.contextId,l=n.forumType,S=n.includeDeleted,m=i.getStore("DiscussionsSearchStore"),f=m.searchResults({forumId:o,pageNum:s});i.dispatch(e.UPDATE_LOADING_STATE,u.LOADING),0===f.length?r.searchFor({query:c,filterQueryString:d,forumType:l,forumId:o,contextId:p,pageNum:s,includeDeleted:S}).then(function(n){i.dispatch(e.SEARCH_PAGE_CHANGE,{pageNum:s,filterQueryString:d,naptimeResponse:n,forumId:o,query:c})}).fail(function(e){return t(i,e)}).done(function(){return a()}):(i.dispatch(e.SEARCH_PAGE_CHANGE,{pageNum:s,filterQueryString:d,forumId:o,query:c}),a())}});