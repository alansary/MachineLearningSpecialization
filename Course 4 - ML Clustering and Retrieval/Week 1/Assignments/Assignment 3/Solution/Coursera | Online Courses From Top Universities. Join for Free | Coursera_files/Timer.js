define("bundles/ondemand/utils/Timer",["require","exports","module"],function(require,exports,module){"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var t=1e3,i=function(){function Timer(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,Timer),this._id=null,this.timeLeft=null,this.deadline=i.deadline||0,this.duration=i.duration||0,this.interval=i.interval||t,this.onTick=i.onTick||function(){},this.onDone=i.onDone||function(){}}return Timer.prototype._initTimeLeft=function _initTimeLeft(){this.deadline>0?this.timeLeft=Math.max(this.deadline-Date.now(),0):this.duration>0?this.timeLeft=this.duration:this.timeLeft=null},Timer.prototype._check=function _check(){this.timeLeft=this.timeLeft-this.interval,this.timeLeft<=0?this.finish():this.onTick()},Timer.prototype.canStart=function canStart(){return this.deadline>0||this.duration>0},Timer.prototype.start=function start(){if(null===this._id&&this.interval>0){if(!this.canStart())throw new Error("Unable to start: valid deadline or duration required");this._initTimeLeft(),this.timeLeft>0?this._id=setInterval(this._check.bind(this),this.interval):this.finish()}},Timer.prototype.stop=function stop(){clearInterval(this._id),this._id=null},Timer.prototype.finish=function finish(){this.timeLeft=0,this.stop(),this.onDone()},Timer}();exports["default"]=i});